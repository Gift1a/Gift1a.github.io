<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"gift1a.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.11.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Android Learning">
<meta property="og:type" content="article">
<meta property="og:title" content="Android-Learning">
<meta property="og:url" content="https://gift1a.github.io/2022/09/06/Android-Learning/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Android Learning">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662458792032.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662459525767.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662461945309.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662462526161.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662463227507.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662463684630.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662464038119.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662464234618.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662465040715.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662465082606.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662465165044.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662465488378.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662465816903.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662466014012.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662468554715.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662469071207.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662469102288.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662469324554.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662469483998.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662469811714.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662469909141.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662478133964.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662478054999.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662478160320.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662478448578.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662530604544.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662532330621.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662532776687.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662533709258.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662533835910.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662533848885.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662533977800.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662534666206.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662535515678.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662535887974.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662536765474.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662537043100.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662537654946.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662537676941.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662537864721.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662554434138.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662554707799.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662555045429.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662557028153.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662557166726.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662559759330.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662559739461.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662559790794.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662563055534.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662563137259.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662563666649.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662562543095.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662651053888.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662651066246.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662685393193.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662685420751.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662685469070.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662685490019.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/screen.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662686061919.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662686248495.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662686406193.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/screen1.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662686524600.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662686647049.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662686681739.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662688387603.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662688504281.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662688520457.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662699467689.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662701465444.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662701425060.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662701514289.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662723282294.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662778547326.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662778609979.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662778853292.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662730119493.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662823868673.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662824921483.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662824903256.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662858899626.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662857331805.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662857822592.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662857927093.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880045024.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880034972.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880263558.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880225392.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880295831.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880319835.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880345039.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880400002.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880450324.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880491695.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880503595.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880530412.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880602902.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880633161.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880698121.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880722306.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662880920311.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1629797694_6124bd3e04f4b48e0205d.png!small">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662881292721.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662883396973.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662886096895.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662886772261.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662892351107.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662898813132.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662898895052.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1663316049430.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220916161929.jpg">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1663316412656.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662901583213.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662901596834.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662901610064.png">
<meta property="og:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662901718318.png">
<meta property="article:published_time" content="2022-09-06T09:51:38.000Z">
<meta property="article:modified_time" content="2022-09-30T15:32:15.041Z">
<meta property="article:author" content="Gift1a">
<meta property="article:tag" content="Android">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gift1a.github.io/2022/09/06/Android-Learning/1662458792032.png">


<link rel="canonical" href="https://gift1a.github.io/2022/09/06/Android-Learning/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://gift1a.github.io/2022/09/06/Android-Learning/","path":"2022/09/06/Android-Learning/","title":"Android-Learning"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Android-Learning | Hexo</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>

<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Hexo</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-guestbook"><a href="/guestbook/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>留言板</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Android-Studio%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95"><span class="nav-number">1.</span> <span class="nav-text">Android Studio项目目录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#APK%E7%9A%84%E8%BF%90%E8%A1%8C"><span class="nav-number">1.1.</span> <span class="nav-text">APK的运行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6"><span class="nav-number">1.2.</span> <span class="nav-text">使用资源文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%A6%E8%A7%A3build-gradle%E6%96%87%E4%BB%B6"><span class="nav-number">1.3.</span> <span class="nav-text">详解build.gradle文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E5%A4%96%E5%B1%82%E7%9A%84bulid-gradle%E6%96%87%E4%BB%B6"><span class="nav-number">1.3.1.</span> <span class="nav-text">项目外层的bulid.gradle文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#app%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84build-gradle%E6%96%87%E4%BB%B6"><span class="nav-number">1.3.2.</span> <span class="nav-text">app目录下的build.gradle文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Android%E4%B8%AD%E7%9A%84%E6%97%A5%E5%BF%97%E5%B7%A5%E5%85%B7Log"><span class="nav-number">1.4.</span> <span class="nav-text">Android中的日志工具Log</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8E%A2%E7%A9%B6%E6%B4%BB%E5%8A%A8"><span class="nav-number">2.</span> <span class="nav-text">探究活动</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%E6%B4%BB%E5%8A%A8"><span class="nav-number">2.1.</span> <span class="nav-text">手动创建活动</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%92%8C%E5%8A%A0%E8%BD%BD%E5%B8%83%E5%B1%80"><span class="nav-number">2.1.1.</span> <span class="nav-text">创建和加载布局</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8AndroidManifest%E6%96%87%E4%BB%B6%E4%B8%AD%E6%B3%A8%E5%86%8C"><span class="nav-number">2.1.2.</span> <span class="nav-text">在AndroidManifest文件中注册</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E4%B8%BB%E6%B4%BB%E5%8A%A8"><span class="nav-number">2.1.3.</span> <span class="nav-text">配置主活动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E6%B4%BB%E5%8A%A8%E4%B8%AD%E4%BD%BF%E7%94%A8Toast"><span class="nav-number">2.1.4.</span> <span class="nav-text">在活动中使用Toast</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E6%B4%BB%E5%8A%A8%E4%B8%AD%E4%BD%BF%E7%94%A8Menu"><span class="nav-number">2.1.5.</span> <span class="nav-text">在活动中使用Menu</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%94%80%E6%AF%81%E4%B8%80%E4%B8%AA%E6%B4%BB%E5%8A%A8"><span class="nav-number">2.1.6.</span> <span class="nav-text">销毁一个活动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8Intent%E5%9C%A8%E6%B4%BB%E5%8A%A8%E4%B9%8B%E9%97%B4%E7%A9%BF%E6%A2%AD"><span class="nav-number">2.1.7.</span> <span class="nav-text">使用Intent在活动之间穿梭</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%98%BE%E5%BC%8FIntent"><span class="nav-number">2.1.7.1.</span> <span class="nav-text">使用显式Intent</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E9%9A%90%E5%BC%8FIntent"><span class="nav-number">2.1.7.2.</span> <span class="nav-text">使用隐式Intent</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9B%B4%E5%A4%9A%E9%9A%90%E5%BC%8FIntent%E7%9A%84%E7%94%A8%E6%B3%95"><span class="nav-number">2.1.7.3.</span> <span class="nav-text">更多隐式Intent的用法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%91%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%B4%BB%E5%8A%A8%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE"><span class="nav-number">2.1.7.4.</span> <span class="nav-text">向下一个活动传递数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE%E7%BB%99%E4%B8%8A%E4%B8%80%E4%B8%AA%E6%B4%BB%E5%8A%A8"><span class="nav-number">2.1.7.5.</span> <span class="nav-text">返回数据给上一个活动</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B4%BB%E5%8A%A8%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">2.1.8.</span> <span class="nav-text">活动的生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%94%E5%9B%9E%E6%A0%88"><span class="nav-number">2.1.8.1.</span> <span class="nav-text">返回栈</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B4%BB%E5%8A%A8%E7%8A%B6%E6%80%81"><span class="nav-number">2.1.8.2.</span> <span class="nav-text">活动状态</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B4%BB%E5%8A%A8%E7%9A%84%E7%94%9F%E5%AD%98%E6%9C%9F"><span class="nav-number">2.1.8.3.</span> <span class="nav-text">活动的生存期</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%BE%E4%B8%AA%E4%BE%8B%E5%AD%90"><span class="nav-number">2.1.8.3.1.</span> <span class="nav-text">举个例子</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B4%BB%E5%8A%A8%E8%A2%AB%E5%9B%9E%E6%94%B6%E4%BA%86%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86"><span class="nav-number">2.1.8.4.</span> <span class="nav-text">活动被回收了怎么处理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F"><span class="nav-number">2.1.8.5.</span> <span class="nav-text">活动的启动模式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#standard"><span class="nav-number">2.1.8.5.1.</span> <span class="nav-text">standard</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#singleTop"><span class="nav-number">2.1.8.5.2.</span> <span class="nav-text">singleTop</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#singleTask"><span class="nav-number">2.1.8.5.3.</span> <span class="nav-text">singleTask</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#singleInstance"><span class="nav-number">2.1.8.5.4.</span> <span class="nav-text">singleInstance</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9A%8F%E6%97%B6%E9%9A%8F%E5%9C%B0%E9%80%80%E5%87%BA%E7%A8%8B%E5%BA%8F"><span class="nav-number">2.1.8.6.</span> <span class="nav-text">随时随地退出程序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E6%B4%BB%E5%8A%A8%E7%9A%84%E6%9C%80%E4%BD%B3%E8%AF%AD%E6%B3%95"><span class="nav-number">2.1.8.7.</span> <span class="nav-text">启动活动的最佳语法</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#UI%E5%BC%80%E5%8F%91%E7%9A%84%E7%82%B9%E7%82%B9%E6%BB%B4%E6%BB%B4"><span class="nav-number">3.</span> <span class="nav-text">UI开发的点点滴滴</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%8E%A7%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">3.1.</span> <span class="nav-text">常用控件的使用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#TextView"><span class="nav-number">3.1.1.</span> <span class="nav-text">TextView</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Button"><span class="nav-number">3.1.2.</span> <span class="nav-text">Button</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EditText"><span class="nav-number">3.1.3.</span> <span class="nav-text">EditText</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ImageView"><span class="nav-number">3.1.4.</span> <span class="nav-text">ImageView</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ProgressBar"><span class="nav-number">3.1.5.</span> <span class="nav-text">ProgressBar</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ProgressDialog"><span class="nav-number">3.1.6.</span> <span class="nav-text">ProgressDialog</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E7%A7%8D%E5%B8%83%E5%B1%80%E6%96%B9%E5%BC%8F"><span class="nav-number">3.2.</span> <span class="nav-text">四种布局方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E6%80%A7%E5%B8%83%E5%B1%80LinearLayout"><span class="nav-number">3.2.1.</span> <span class="nav-text">线性布局LinearLayout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B8%E5%AF%B9%E5%B8%83%E5%B1%80Relativelayout"><span class="nav-number">3.2.2.</span> <span class="nav-text">相对布局Relativelayout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A7%E5%B8%83%E5%B1%80FrameLayout"><span class="nav-number">3.2.3.</span> <span class="nav-text">帧布局FrameLayout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BE%E5%88%86%E6%AF%94%E5%B8%83%E5%B1%80"><span class="nav-number">3.2.4.</span> <span class="nav-text">百分比布局</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ListView"><span class="nav-number">3.3.</span> <span class="nav-text">ListView</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Android-NDK%E5%BC%80%E5%8F%91"><span class="nav-number">4.</span> <span class="nav-text">Android NDK开发</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#JNI%E5%92%8CNDK"><span class="nav-number">4.1.</span> <span class="nav-text">JNI和NDK</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JNI%E5%BC%80%E5%8F%91"><span class="nav-number">4.1.1.</span> <span class="nav-text">JNI开发</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#native%E5%91%BD%E5%90%8D%E6%96%B9%E6%B3%95"><span class="nav-number">4.1.1.1.</span> <span class="nav-text">native命名方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JNI%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8CJava%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="nav-number">4.1.1.2.</span> <span class="nav-text">JNI数据类型和Java数据类型的关系</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JNI%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86"><span class="nav-number">4.1.2.</span> <span class="nav-text">JNI的字符串处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#native%E6%93%8D%E4%BD%9CJVM"><span class="nav-number">4.1.2.1.</span> <span class="nav-text">native操作JVM</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C"><span class="nav-number">4.1.3.</span> <span class="nav-text">数组操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E6%95%B0%E7%BB%84"><span class="nav-number">4.1.3.1.</span> <span class="nav-text">基本类型数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84"><span class="nav-number">4.1.3.2.</span> <span class="nav-text">对象数组</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Native%E8%B0%83%E7%94%A8Java%E6%96%B9%E6%B3%95"><span class="nav-number">4.1.4.</span> <span class="nav-text">Native调用Java方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Native%E8%B0%83%E7%94%A8Java%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="nav-number">4.1.4.1.</span> <span class="nav-text">Native调用Java静态方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Native%E8%B0%83%E7%94%A8Java%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95"><span class="nav-number">4.1.4.2.</span> <span class="nav-text">Native调用Java实例方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E6%B3%A8%E5%86%8C%E5%92%8C%E5%8A%A8%E6%80%81%E6%B3%A8%E5%86%8C"><span class="nav-number">4.1.5.</span> <span class="nav-text">静态注册和动态注册</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E6%B3%A8%E5%86%8C"><span class="nav-number">4.1.5.1.</span> <span class="nav-text">静态注册</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E6%B3%A8%E5%86%8C"><span class="nav-number">4.1.6.</span> <span class="nav-text">动态注册</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#APK%E5%8F%91%E5%B8%83Release"><span class="nav-number">5.</span> <span class="nav-text">APK发布Release</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Gift1a"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Gift1a</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">78</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Gift1a" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Gift1a" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      友链
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://1.12.239.117:8090/" title="http:&#x2F;&#x2F;1.12.239.117:8090&#x2F;" rel="noopener" target="_blank">Fallw1nd</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://equinox-shame.github.io/" title="https:&#x2F;&#x2F;equinox-shame.github.io&#x2F;" rel="noopener" target="_blank">梓曰</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://a2ur2.github.io/" title="https:&#x2F;&#x2F;a2ur2.github.io&#x2F;" rel="noopener" target="_blank">A2ure</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.cnblogs.com/spmonkey/" title="https:&#x2F;&#x2F;www.cnblogs.com&#x2F;spmonkey&#x2F;" rel="noopener" target="_blank">星空</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gift1a.github.io/2022/09/06/Android-Learning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Gift1a">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Android-Learning | Hexo">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Android-Learning
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-09-06 17:51:38" itemprop="dateCreated datePublished" datetime="2022-09-06T17:51:38+08:00">2022-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-09-30 23:32:15" itemprop="dateModified" datetime="2022-09-30T23:32:15+08:00">2022-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Valine：</span>
  
    <a title="valine" href="/2022/09/06/Android-Learning/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/09/06/Android-Learning/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>25k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>23 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>Android Learning</p>
<span id="more"></span>
<h1 id="Android-Studio项目目录"><a class="header-anchor" href="#Android-Studio项目目录">¶</a>Android Studio项目目录</h1>
<p><img src="/2022/09/06/Android-Learning/1662458792032.png" alt=""></p>
<ul>
<li>
<p>.gradle和.idea：这两个目录下放置的都是Android Studio自动生成的一些代码，我们无需关心</p>
</li>
<li>
<p><strong>app</strong>：项目中的代码、资源等内容几乎都是放置在这个目录下的，开发工作已基本都是在这个目录下进行的</p>
<p><img src="/2022/09/06/Android-Learning/1662459525767.png" alt=""></p>
<ul>
<li>​	build：主要包含了一些在编译时自动生成的文件</li>
<li>libs：使用到的第三方jar包会被放在该目录下</li>
<li>android Test：用来编写Android Test测试用例，对项目进行自动化测试</li>
<li>java：放置java代码</li>
<li><strong>res</strong>：存放在项目中使用到的资源文件(图片、布局、字符串)，有多种相同开头的文件夹似乎为了<strong>让程序能够更好地兼容各种设备</strong>
<ul>
<li><strong>所有以drawable开头的文件夹都是用存放图片的</strong></li>
<li><strong>所有以mipmap开头的文件夹都是用来放应用图标的</strong></li>
<li><strong>所有以values开头的文件夹都是用来存放字符串、样式、颜色等配置的</strong></li>
<li><strong>latout文件夹是用来放布局文件的</strong></li>
</ul>
</li>
<li><strong>Android Manifest.xml</strong>：整个项目的配置文件，在程序中定义的四大组件都需要在这个文件中注册，还可以在这个文件中给应用程序添加权限声明</li>
<li>test：用于编写Unit Test测试用例的，对项目进行自动化测试</li>
<li>.gitignore：作用和外层的.gitignore文件类似</li>
<li>app.iml：IDEA项目自动创建的文件</li>
<li>build.gradle：这是app模块的gradle构建脚本，会指定很多项目构建相关的配置</li>
<li><strong><a target="_blank" rel="noopener" href="http://proguard-rules.pro">proguard-rules.pro</a></strong>：这个文件用于制定项目代码的混淆规则</li>
</ul>
</li>
<li>
<p>build：主要包含了一些在编译时自动生成的文件</p>
</li>
<li>
<p>gradle：这个目录下包含了gradle wrapper的配置文件，使用gradle wrapper的方式不需要提前下载好gradle，而是自动联网下载gradle。<strong>Android Studio默认没有启用gradle wrapper方式，可以在File-&gt;Settings-&gt;Build,Execution,Deployment-&gt;Gradle进行配置</strong></p>
</li>
<li>
<p>gitignore：用来将指定的目录或文件排除在版本控制之外</p>
</li>
<li>
<p>build.gradle：这是项目全局的gradle构建脚本</p>
</li>
<li>
<p>gradle.properties：这个文件是全局的gradle配置文件，在这里配置的属性将会影响到项目中所有的gradle编译脚本</p>
</li>
<li>
<p>gradlew和gradlew.bat：这两个文件是用来在命令行界面中执行gradle命令的，<strong>分别对应Linux、Mac系统和Windows系统</strong></p>
</li>
<li>
<p>Myapplication.iml：iml是所有IntelliJ IDEA项目都会自动创建的一个文件，用于表示这是一个IDEA项目</p>
</li>
<li>
<p>local.properties：指定本机中Android SDK路径</p>
</li>
<li>
<p>settings.gradle：用于指定项目中所有引入的模块</p>
</li>
</ul>
<h2 id="APK的运行"><a class="header-anchor" href="#APK的运行">¶</a>APK的运行</h2>
<p>首先先在AndroidManifest.xml文件找到这段代码</p>
<p><img src="/2022/09/06/Android-Learning/1662461945309.png" alt=""></p>
<blockquote>
<p><strong>android:name=".ClassName"对该类名的函数进行注册，没有在AndroidManifest.xml里注册的活动是不能使用的,具体来说，android:name 属性的作用就是设置一个类，当app运行前创建实例，并可以将类中的数据在运行期间给所有 Activity 来访问。其中intent-filter里的两行代码<action android:name="android.intent.action.MAIN">和<category android:name="android.intent.category.LAUNCHAR">表示Mainactivity是这个项目的主活动，在手机上点集应用图标，首先启动这个活动</category></action></strong></p>
</blockquote>
<blockquote>
<p>活动是应用程序的门面，凡是在应用中能看到的东西都是放在活动中的</p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662462526161.png" alt=""></p>
<p>可以看到MainActivity是继承自AppCompatActivity的，<strong>Activity是Android系统提供的一个活动基类</strong>，项目中所有的活动都必须继承它或者它的子类才能拥有活动的特性(AppCompatActivity是Activity的子类)，<strong>而Oncreate()是MainActivity的方法，这个方法是一个活动被创建时必定要执行的方法</strong></p>
<blockquote>
<p>Android程序的设计逻辑讲究<strong>逻辑和视图分离</strong>，因此不建议在活动中直接编写界面，而应该<strong>在布局文件中编写界面，在活动中引入进来</strong>。Oncreate()方法第二行调用了setContentview方法，<strong>为当前的活动引入了一个activity_main布局</strong>。<strong>布局文件都是定义在res/layout目录下的</strong></p>
</blockquote>
<p>在res/layout/activity_main.xml下可以看到</p>
<p><img src="/2022/09/06/Android-Learning/1662463227507.png" alt=""></p>
<p><strong>TestView是Android系统提供的一个控件，用于在布局中显示文字</strong>，而显示出来的"Hello World!"就是通过android:text="Hello World!"定义的</p>
<h2 id="使用资源文件"><a class="header-anchor" href="#使用资源文件">¶</a>使用资源文件</h2>
<p>打开res/layout/strings.xml文件可以看到</p>
<p><img src="/2022/09/06/Android-Learning/1662463684630.png" alt=""></p>
<p>对于这个定义应用程序名的字符串，我们有两种方式来引用它</p>
<ul>
<li><strong>在代码中通过R.string.activity_main可以获得该字符串的引用</strong></li>
<li><strong>在XML中通过@string/activity_main可以获得该字符串的引用</strong></li>
</ul>
<p>基本的语法就是上面这两种，对于其他资源文件，只需要替换string部分即可，使用例子如下</p>
<p><img src="/2022/09/06/Android-Learning/1662464038119.png" alt=""></p>
<h2 id="详解build-gradle文件"><a class="header-anchor" href="#详解build-gradle文件">¶</a>详解build.gradle文件</h2>
<p>Android Stuido采用Gradle来构建项目。Gradle基于Groovy的领域特定语言(DSL)来声明项目设置</p>
<h3 id="项目外层的bulid-gradle文件"><a class="header-anchor" href="#项目外层的bulid-gradle文件">¶</a>项目外层的bulid.gradle文件</h3>
<p><img src="/2022/09/06/Android-Learning/1662464234618.png" alt=""></p>
<p>dependencies闭包中使用classpath声明了一个Gradle插件。由于Gradle还可以用于构建Java、C++等项目，所以需要声明插件</p>
<h3 id="app目录下的build-gradle文件"><a class="header-anchor" href="#app目录下的build-gradle文件">¶</a>app目录下的build.gradle文件</h3>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">plugins {</span><br><span class="line">    id <span class="string">'com.android.application'</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">android {</span><br><span class="line">    compileSdk <span class="number">31</span></span><br><span class="line"></span><br><span class="line">    defaultConfig {</span><br><span class="line">        applicationId <span class="string">"com.example.myapplication"</span></span><br><span class="line">        minSdk <span class="number">21</span></span><br><span class="line">        targetSdk <span class="number">31</span></span><br><span class="line">        versionCode <span class="number">1</span></span><br><span class="line">        versionName <span class="string">"1.0"</span></span><br><span class="line"></span><br><span class="line">        testInstrumentationRunner <span class="string">"androidx.test.runner.AndroidJUnitRunner"</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    buildTypes {</span><br><span class="line">        release {</span><br><span class="line">            <span class="function">minifyEnabled <span class="keyword">false</span></span></span><br><span class="line"><span class="function">            proguardFiles <span class="title">getDefaultProguardFile</span><span class="params">(<span class="string">'proguard-android-optimize.txt'</span>)</span>, 'proguard-rules.pro'</span></span><br><span class="line"><span class="function">        }</span></span><br><span class="line"><span class="function">    }</span></span><br><span class="line"><span class="function">    compileOptions </span>{</span><br><span class="line">        sourceCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">        targetCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">dependencies {</span><br><span class="line"></span><br><span class="line">    implementation <span class="string">'androidx.appcompat:appcompat:1.2.0'</span></span><br><span class="line">    implementation <span class="string">'com.google.android.material:material:1.3.0'</span></span><br><span class="line">    implementation <span class="string">'androidx.constraintlayout:constraintlayout:2.0.4'</span></span><br><span class="line">    testImplementation <span class="string">'junit:junit:4.+'</span></span><br><span class="line">    androidTestImplementation <span class="string">'androidx.test.ext:junit:1.1.2'</span></span><br><span class="line">    androidTestImplementation <span class="string">'androidx.test.espresso:espresso-core:3.3.0'</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>第一行应用了一个插件，一般有两种值可选:<strong>com.android.application和com.android.library</strong>，分别表示这是一个应用程序模块和一个库模块</p>
<p>接下来是一个大的android闭包，主要用于配置项目构建的各种属性，<strong>compileSdkVersion用于指定项目构建版本的版本</strong>。android闭包中的defaultConfig闭包对项目中的更多细节进行配置，<strong>applicationId用于指定项目的包名，我们可以在这里修改包名</strong>，<strong>minSdkversion指定项目最低兼容的Android系统版本</strong>，<strong>targetSdkVersion指定的值表示你已经在该目标版做过充分的测试</strong>，<strong>versionCode和versionName分别指定项目的版本号和版本名</strong></p>
<p><strong>buildTypes</strong>闭包用于指定生成安装文件的相关配置，<strong>通常只会有debug和release闭包</strong></p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662465040715.png" alt="release闭包中的代码混淆"></p>
<p>dependencies闭包</p>
<p><img src="/2022/09/06/Android-Learning/1662465082606.png" alt=""></p>
<h2 id="Android中的日志工具Log"><a class="header-anchor" href="#Android中的日志工具Log">¶</a>Android中的日志工具Log</h2>
<p>Log中有五种方法</p>
<p><img src="/2022/09/06/Android-Learning/1662465165044.png" alt=""></p>
<p>在代码中加入Log.d(“MainActivity”,“Oncreate execute”);，然后重新运行就可以在logcat窗口中看见打印的信息</p>
<p><img src="/2022/09/06/Android-Learning/1662465488378.png" alt=""></p>
<p>由于每次传入参数Tag，我们可以在Oncreate方法外输入logt+Tab，<strong>此时就会以当前的类名作为值自动生成一个TAG常量</strong></p>
<p><img src="/2022/09/06/Android-Learning/1662465816903.png" alt=""></p>
<p>同时在logcat中可以添加过滤器来过滤我们不需要的信息</p>
<p><img src="/2022/09/06/Android-Learning/1662466014012.png" alt=""></p>
<p>我们可以通过Edit Filter Configuration创建根据Tag进行过滤的过滤器</p>
<h1 id="探究活动"><a class="header-anchor" href="#探究活动">¶</a>探究活动</h1>
<h2 id="手动创建活动"><a class="header-anchor" href="#手动创建活动">¶</a>手动创建活动</h2>
<p>首先先手动创建一个空的项目，然后手动添加Activity，注意此时不要将该活动注册，也不要设为当前项目的主活动</p>
<p><img src="/2022/09/06/Android-Learning/1662468554715.png" alt=""></p>
<blockquote>
<p><strong>项目中的任何活动都应该重写Activity中的Oncreate()方法，因为父类中也有该方法</strong></p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>这里的onCreate()方法就是调用了父类的onCreate()方法</p>
<h3 id="创建和加载布局"><a class="header-anchor" href="#创建和加载布局">¶</a>创建和加载布局</h3>
<p>Android程序设计讲究逻辑和视图分离，最后每一个活动都能对于一个布局，<strong>布局就是用来显示界面内容的</strong></p>
<p>app/src/main/res-&gt;New-&gt;Directory/Android resource Directiory创建一个layout目录，然后再右键创建Layout resource file</p>
<p><img src="/2022/09/06/Android-Learning/1662469071207.png" alt=""></p>
<p><img src="/2022/09/06/Android-Learning/1662469102288.png" alt=""></p>
<p>创建完成之后AS为我们提供了可视化布局编辑器，下图红色框中的三个按钮可以在文本模式和可视化布局下切换</p>
<p><img src="/2022/09/06/Android-Learning/1662469324554.png" alt=""></p>
<p>接下来我们添加一个Button元素</p>
<p><img src="/2022/09/06/Android-Learning/1662469483998.png" alt=""></p>
<blockquote>
<p><strong>如果我们需要在XML中引用一个id，就是用@id/id_name这种语法，如果是定义一个id，就使用@+id/id_name这种语法</strong>，下面三个属性分别是宽高和元素中显示的文字内容，<strong>创建之后我们就可以通过R.id.id_name来直接加载资源文件</strong></p>
</blockquote>
<p>此时切换回布局界面就可以看见我们创建的Button了</p>
<p><img src="/2022/09/06/Android-Learning/1662469811714.png" alt=""></p>
<p>接下来我们在活动中加载这个布局</p>
<p><img src="/2022/09/06/Android-Learning/1662469909141.png" alt=""></p>
<blockquote>
<p>在setContentView()方法中，我们一般会传入一个布局文件的id。<strong>项目中添加的任何资源都会在R文件中生成一个相应的资源id</strong>，因此我们创建的first_layout.xml布局的id现在应该是已经添加到R文件中了，<strong>接着只需要调用R.layout.first_layout就可以得到first_layout.xml布局的id</strong>，然后将这个值传入setContentView()方法即可</p>
</blockquote>
<h3 id="在AndroidManifest文件中注册"><a class="header-anchor" href="#在AndroidManifest文件中注册">¶</a>在AndroidManifest文件中注册</h3>
<p>接下来我们要将活动进行注册，而AS已经自动帮我们注册了，但是此时还未指定程序的主活动。</p>
<h3 id="配置主活动"><a class="header-anchor" href="#配置主活动">¶</a>配置主活动</h3>
<p>只需要在<activity>标签内部加入<intent-filter>标签，并且在这个标签里添加<action android:name="android.intent.action.MAIN">和<category android:name="android.intent.category.LAUNCHER">这两句声明即可</category></action></intent-filter></activity></p>
<p><img src="/2022/09/06/Android-Learning/1662478133964.png" alt=""></p>
<blockquote>
<p>注意如果添加<intent-filter>标签需要加上<strong>android:exported=“true”</strong></intent-filter></p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662478054999.png" alt=""></p>
<p>然后运行即可，可以看到BUTTON1按钮已经创建好了</p>
<p><img src="/2022/09/06/Android-Learning/1662478160320.png" alt=""></p>
<p>下面这个是标签栏</p>
<p><img src="/2022/09/06/Android-Learning/1662478448578.png" alt=""></p>
<blockquote>
<p>如果应用程序中没有声明任何一个活动作为主活动，这个程序仍然是可以正常安装的，只是无法在启动器中看到或打开这个程序。<strong>这种程序一般都是作为第三方服务提供其他应用在内部进行调用的，比如支付宝的快捷支付服务</strong></p>
</blockquote>
<h3 id="在活动中使用Toast"><a class="header-anchor" href="#在活动中使用Toast">¶</a>在活动中使用Toast</h3>
<blockquote>
<p><strong>Toast是Android系统提供的一种非常好的提醒方式，在程序中可以使用它将一些短小的信息通知给用户，这些信息会在一段时间后自动消失</strong></p>
</blockquote>
<p>先在我们创建的按钮中添加一个<strong>弹出Toast的触发点</strong>，在Oncreate函数中添加代码</p>
<p><img src="/2022/09/06/Android-Learning/1662530604544.png" alt=""></p>
<blockquote>
<p><strong>在活动中可以通过findViewById()方法获取到在布局文件中定义的元素，这里我们传入R.id.button_1来获得按钮的实例（new出来的对象）</strong>，这个值就是我们在first_layout.xml中通过android:id属性指定的。<strong>findViewById()方法返回一个View对象，我们需要向下转型为Button对象</strong>，得到按钮的实例之后，我们通过<strong>setOnclickListener()方法为按钮注册一个监听器，点击按钮就会执行监听器中的onClick()方法。因此弹出Toast的功能需要在onClick()方法中编写</strong></p>
<p>Toast的用法比较简单，<strong>通过makeText()创建出一个Toast对象，然后调用show()将Toast显示出来即可</strong>，makeText()方法需要三个参数，<strong>第一个参数是Context，也就是Toast要求的上下文，而活动本身就是一个Context对象，所以直接传入MainActivity.this即可，第二个参数是Toast显示的文本内容，第三个参数是Toast显示的时长，可以选择Toast.LENGTH_SHORT或Toast.LENGTH_LONG</strong></p>
</blockquote>
<p><strong>同时我们可以修改Toast的颜色、背景和字体大小，然后再调用show方法</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.itbaoku.cn/post/1922470.html">自定义Toast</a></p>
<h3 id="在活动中使用Menu"><a class="header-anchor" href="#在活动中使用Menu">¶</a>在活动中使用Menu</h3>
<blockquote>
<p><strong>首先在res目录下新建一个menu文件夹，接着在这个文件夹下新建一个叫main的菜单文件</strong></p>
</blockquote>
<p>接下来再main.xml中添加如下代码</p>
<p><img src="/2022/09/06/Android-Learning/1662532330621.png" alt=""></p>
<blockquote>
<p>这里我们创建了两个菜单项，<strong>其中<item>标签用来创建一个具体的菜单项，通过android:id为这个菜单指定一个唯一的标识符，通过android:title为这个菜单指定名称</item></strong></p>
</blockquote>
<p>接着重新回到MainAcivity中重写onCreateOptionsMenu()方法</p>
<blockquote>
<p><strong>可以通过Ctrl+O快速重写方法</strong></p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662532776687.png" alt=""></p>
<blockquote>
<p><strong>getMenuInflater()方法能够得到MenuInflater对象，再调用它的inflate方法就可以给当前活动创建菜单了。第一个参数用于指定使用哪一个资源文件来创建菜单，第二个参数用于指定我们的菜单项将添加到哪一个Menu对象中去</strong>，这里直接使用onCreateOptionsMenu方法中传入的menu参数，然后返回true表示创建成功。</p>
<p><strong>我们还需要定义菜单响应事件</strong>，在MainActivity中重写onOptionsMenuSelected方法</p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662533709258.png" alt=""></p>
<blockquote>
<p><strong>在onOptionsItemSelected方法中，通过调用item.getItemid()来判断我们点击的菜单项，然后为菜单项加入逻辑</strong></p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662533835910.png" alt=""></p>
<p><img src="/2022/09/06/Android-Learning/1662533848885.png" alt=""></p>
<h3 id="销毁一个活动"><a class="header-anchor" href="#销毁一个活动">¶</a>销毁一个活动</h3>
<blockquote>
<p><strong>Activity类中提供了一个finish()方法来让我们结束当前的活动</strong></p>
</blockquote>
<p>我们在MainActivity中修改一下代码，此时点击Button1活动就会结束了</p>
<p><img src="/2022/09/06/Android-Learning/1662533977800.png" alt=""></p>
<h3 id="使用Intent在活动之间穿梭"><a class="header-anchor" href="#使用Intent在活动之间穿梭">¶</a>使用Intent在活动之间穿梭</h3>
<p>接下来我们会学习如何从主活动跳转到其他活动</p>
<h4 id="使用显式Intent"><a class="header-anchor" href="#使用显式Intent">¶</a>使用显式Intent</h4>
<p>接下来我们再创建一个活动，并且定义一个按钮，<strong>此时AS已经自动帮我们在AndroidManifest.xml文件中注册了</strong></p>
<blockquote>
<p><strong>LinearLayout表示线性布局，在Android中有六种布局</strong></p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662534666206.png" alt=""></p>
<blockquote>
<p><strong>Intent是Android程序中各组件之间进行交互的一种重要方式，它不仅可以指明当前组件想要执行的动作，还可以在不同组件之间传递数据，Intent一般可被用于启动活动，启动服务以及发送广播等场景</strong></p>
<p><strong>Intent大致可以分为显式和隐式</strong></p>
<p><strong>Intent有多个构造函数的重载，其中一个是Intent(Context packageContext,Class&lt;?&gt;cls)。这个构造函数接受两个参数，第一个参数Context要求提供一个启动活动的上下文，第二个参数Class则是指定想要启动的目标活动</strong>。<strong>接下来我们将Intent对象传入Activity类中的startActivity方法启动目标活动</strong></p>
</blockquote>
<p>我们将当前活动作为上下文，出啊如SecondActivity.class作为目标互动，此时点击Button1就会通过startActivity来执行这个Intent</p>
<p><img src="/2022/09/06/Android-Learning/1662535515678.png" alt=""></p>
<p><strong>如果想销毁当前的互动，只需要点击Back键即可</strong></p>
<p><img src="/2022/09/06/Android-Learning/1662535887974.png" alt=""></p>
<blockquote>
<p>这种Intent的"意图"非常明显的，我们称之为显式Intent</p>
</blockquote>
<h4 id="使用隐式Intent"><a class="header-anchor" href="#使用隐式Intent">¶</a>使用隐式Intent</h4>
<blockquote>
<p><strong>隐式Intent并不在明确指出我们想要启动的活动，而是指定了一系列action和category等信息，然后交由系统去分析Intent，并帮我们找出合适的活动去启动</strong></p>
<p><strong>我们可以通过在<activity>标签下配置<intent-filter>的内容（intent过滤器），进而指定当前活动能够响应的action和category</intent-filter></activity></strong></p>
</blockquote>
<p>在<action>标签中我们指明了当前活动可以响应com.example.myapplication.ACTION_START这个action，而<category>标签则包含了一些附加信息，更精确地指定当前活动能够响应的Intent，只有Intent过滤器中的全部标签都满足时，这个活动才能响应该Intent</category></action></p>
<p><img src="/2022/09/06/Android-Learning/1662536765474.png" alt=""></p>
<p>修改MainActivity中按钮的点击事件</p>
<p><img src="/2022/09/06/Android-Learning/1662537043100.png" alt=""></p>
<blockquote>
<p><strong>这里我们传入不同的参数来使用不同的构造函数</strong>，这里我们直接将action的字符串传入，<strong>表明我们想要启动能够响应com.example.myapplication.ACTION_START这个action的活动</strong>。没有指定category是因为<strong>android.intent.category.DEFAULT</strong>是一种默认的category，在调用starActivity会自动将这个category添加到Intent中</p>
</blockquote>
<blockquote>
<p><strong>每个Intent中只能指定一个action，但却能指定多个category</strong>，接下来我们在Intent中增加一个category，并且在活动的<intent-filter>中添加该categoty，表示可以响应这个Intent中的category内容</intent-filter></p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662537654946.png" alt=""></p>
<p><img src="/2022/09/06/Android-Learning/1662537676941.png" alt=""></p>
<p>此时我们可以通过点击Button1进入SecondActivity活动</p>
<p><img src="/2022/09/06/Android-Learning/1662537864721.png" alt=""></p>
<p>这个就是隐式Intent</p>
<h4 id="更多隐式Intent的用法"><a class="header-anchor" href="#更多隐式Intent的用法">¶</a>更多隐式Intent的用法</h4>
<blockquote>
<p><strong>使用隐式Intent不仅可以启动自己程序内的活动，还可以启动其他程序的活动，这使得Android多个应用程序之间的功能共享成为了可能</strong>，我们可以调用系统的浏览器来打开网页</p>
</blockquote>
<p>我们创建一个隐式Intent</p>
<p><img src="/2022/09/06/Android-Learning/1662554434138.png" alt=""></p>
<blockquote>
<p>首先制定了Intent的action是Intent.ACTION_VIEW，这是一个Android系统的内置动作，其常量值为android.intent.VIEW，然后通过Uri.prase()方法将一个网站字符串解析为Uri对象，再调用Intent的setData()方法将这个Uri对象传递进去，<strong>setdata()方法接受一个Uri对象，用于指定当前Intent正在操作的数据，而这些数据通常都是 以字符串的形式传入Uri.parse()方法中解析产生的</strong></p>
</blockquote>
<p>此时我们点击Button1就会启动浏览器并且打开百度</p>
<p><img src="/2022/09/06/Android-Learning/1662554707799.png" alt=""></p>
<blockquote>
<p>**我们还可以在<intent-filter>标签中再配置一个<data>标签，用于更精确地指定当前活动能够响应什么类型的数据 **</data></intent-filter></p>
</blockquote>
<p><data>标签主要可以配置以下内容</data></p>
<p><img src="/2022/09/06/Android-Learning/1662555045429.png" alt=""></p>
<p>只有<data>标签指定的内容和Intent中携带的Data完全一致时，当前活动才能响应该Intent，<strong>不过一般在<data>标签中不会指定过多的内容</data></strong>。当我们指定android:scheme为http就可以响应所有http协议的Intent了</data></p>
<p>下面是例子</p>
<p>创建一个ThirdActivity，然后修改layout布局文件，最后在AndroidManifest.xml中修改ThirdActivity的注册信息</p>
<p><img src="/2022/09/06/Android-Learning/1662557028153.png" alt=""></p>
<p>此时再点击Button1就会有两个活动来响应Intent，会跳出列表(<strong>目前能够响应这个Intent的所有程序</strong>)让我们来选择</p>
<blockquote>
<p>除此之外我们还可以指定其他协议</p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662557166726.png" alt=""></p>
<h4 id="向下一个活动传递数据"><a class="header-anchor" href="#向下一个活动传递数据">¶</a>向下一个活动传递数据</h4>
<blockquote>
<p><strong>Intent中提供了一系列putExtra()方法的重载，可以把我们想要传递的数据暂存在Intent中，启动另一个活动之后，只需要把这些数据再从Intent中取出即可</strong></p>
</blockquote>
<p>比如说MainActivity中有一个字符串，现在想把这个字符串传递到SecondActivity中</p>
<p><img src="/2022/09/06/Android-Learning/1662559759330.png" alt="MainActivity"></p>
<p><img src="/2022/09/06/Android-Learning/1662559739461.png" alt="SecondActivity"></p>
<p>效果如下，可以在logcat中看到传入到SecondActivity中的data被打印</p>
<p><img src="/2022/09/06/Android-Learning/1662559790794.png" alt=""></p>
<blockquote>
<p><strong>在MainACtivity中使用显式Intent启动SecondActivity，并且通过putExtra()方法传递了一个字符串，其中第一个参数是键，用于后面从Intent中取值，第二个参数才是真正要传递的数据</strong></p>
<p><strong>在SecondActivity中使用getIntent()方法获取到用于启动SecondActivity的Intent，然后调用getStringExtra()方法传入相应的键值来获取传递的数据</strong>。不同类型的数据接收的方法也不同，整型则使用getIntExtra()方法</p>
</blockquote>
<h4 id="返回数据给上一个活动"><a class="header-anchor" href="#返回数据给上一个活动">¶</a>返回数据给上一个活动</h4>
<blockquote>
<p><strong>在Activity中还有一个startActivityForResult()方法，该方法也是用于启动活动的，并且能够在活动销毁的时候返回一个结果给上一个活动</strong></p>
<p><strong>startActivityForResult()方法接收两个参数，第一个参数是Intent，第二个参数是请求码，用于在之后的回调中判断数据的来源(请求码只要是一个唯一值即可)</strong></p>
<p>在MainActivity中<strong>以startActivityForResult方法来启动SecondActivity，请求码只要是一个唯一值就可以了</strong>，这里传入了1</p>
</blockquote>
<p>其中startActivityForResult方法被划横线是因为不推荐使用</p>
<p><img src="/2022/09/06/Android-Learning/1662563055534.png" alt="MainActivity"></p>
<blockquote>
<p><strong>在SecondActivity给button2注册点击事件，并在点击事件中添加返回数据的逻辑</strong>。我们构建了一个Intent，紧接着把要传递的数据存放在Intent中，然后调用了<strong>SetResult()方法，这个方法专门用于向上一个活动返回数据的，第一个参数用于向上一个活动返回处理结果，一般只使用RESULT_OK或RESULT_CANCELED这两个值，第二个参数则是把带有数据的Intent传递回去</strong>，然后finish()销毁当前活动</p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662563137259.png" alt="SecondActivity"></p>
<blockquote>
<p>由于我们使用startActivityForResult方法来启动SecondActivity的，<strong>SecondActivity被销毁之后会回调上一个活动的onActivityResult()方法，所以需要在MainActivity中重写这个方法来获取返回的数据</strong>。<strong>第一个参数requestCode是我们在启动活动时传入的请求码，第二个参数resultCode是我门在返回数据时的处理结果，第三个参数data即为携带数据的Intent</strong>。在活动结束后先通过检查requestCode的值来判断数据来源，然后通过resultCode来判断处理结果是否成功。最后从data中根据键取值并打印</p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662563666649.png" alt=""></p>
<p>运行结果，logcat中打印了SecondActivity返回的数据</p>
<p><img src="/2022/09/06/Android-Learning/1662562543095.png" alt=""></p>
<h3 id="活动的生命周期"><a class="header-anchor" href="#活动的生命周期">¶</a>活动的生命周期</h3>
<p>了解活动的生命周期可以让我们<strong>写出更加连贯流畅的程序</strong>，<strong>并学会如何合理管理应用资源</strong></p>
<h4 id="返回栈"><a class="header-anchor" href="#返回栈">¶</a>返回栈</h4>
<blockquote>
<p>Android的任务是可以层叠的，新启动的活动会覆盖在原活动之上，点击Back键会销毁最上面的活动，下一个活动就会重新显示出来</p>
<p><strong>Android使用Task来管理任务，一个任务就是一组存放在栈里的活动的集合，这个栈就是返回栈</strong>。当我们调用finish()方法或者点击Back键时，栈顶的活动就会出栈，此时前一个入栈的活动即为栈顶元素，<strong>系统总是会显示栈顶的活动给用户</strong></p>
</blockquote>
<h4 id="活动状态"><a class="header-anchor" href="#活动状态">¶</a>活动状态</h4>
<p>每个活动在其生命周期最多可能会有4种状态</p>
<ol>
<li>运行状态：此时活动处于返回栈栈顶</li>
<li>暂停状态：当一个活动不再处于栈顶位置但仍然可见时，此时活动进入暂停状态</li>
<li>停止状态：当一个活动不再处于栈顶位置，并且完全不可见的时候，就进去了停止状态。<strong>虽然此时系统仍会为这种活动保存相应的状态和成员变量，但是当其他地方需要内存时，处于停止状态的活动那个有可能会被系统回收</strong></li>
<li>销毁活动：当一个活动从返回栈种移除后就变成了销毁状态，<strong>系统会最倾向于回收处于这种状态的活动</strong>，从而保证手机的内存充足</li>
</ol>
<h4 id="活动的生存期"><a class="header-anchor" href="#活动的生存期">¶</a>活动的生存期</h4>
<blockquote>
<p>Activity类中定义了七个回调函数，覆盖了活动生命周期的每一个环节</p>
</blockquote>
<ul>
<li>oncreate()：他会在活动第一次被创建的时候调用，<strong>我们应该在这个方法中完成活动的初始化操作，比如加载布局、绑定事件等</strong></li>
<li>onStart()：这个方法在活动由不可见变为可见的时候调用</li>
<li>onResume()：<strong>这个方法准备好和用户进行交互的时候调用</strong>，此时的活动一定位于返回栈的栈顶并且处于运行状态</li>
<li>onPause()：这个方法在系统准备去启动或者恢复另一个活动的时候调用。<strong>我们通常会在这个方法中将一些消耗CPU的资源释放掉，以及保存一些关键数据</strong></li>
<li>onStop()：这个方法在活动完全不可见的时候调用，<strong>它和onPause()方法的主要去别的在于：如果启动的新活动是一个对话框式的活动，那么onPause()方法会得到执行，而onStop()方法不会执行</strong></li>
<li>onDestroy()：将活动的状态变为销毁状态</li>
<li>onRestart()：重新启动活动</li>
</ul>
<p>通过以上七种方法我们可以划分出活动的生命周期</p>
<p><img src="/2022/09/06/Android-Learning/1662651053888.png" alt=""></p>
<p><img src="/2022/09/06/Android-Learning/1662651066246.png" alt="活动的展示图"></p>
<h5 id="举个例子"><a class="header-anchor" href="#举个例子">¶</a>举个例子</h5>
<p>我们先创建两个活动的并且创建对应的布局，在MainActivity设置两个Button分别来启动不同的活动，其中NormalActivity是正常活动，显示了一个TextView，而DialogActivity是对话框主题(只需要在AndroidManifest.xml选择活动的主题即可)</p>
<p>代码如下</p>
<p><img src="/2022/09/06/Android-Learning/1662685393193.png" alt=""></p>
<p><img src="/2022/09/06/Android-Learning/1662685420751.png" alt=""></p>
<p><img src="/2022/09/06/Android-Learning/1662685469070.png" alt="activity_main"></p>
<p><img src="/2022/09/06/Android-Learning/1662685490019.png" alt="AndroidManifest"></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.android_text3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.android.material.snackbar.Snackbar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.navigation.NavController;</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.Navigation;</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.ui.AppBarConfiguration;</span><br><span class="line"><span class="keyword">import</span> androidx.navigation.ui.NavigationUI;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.android_text3.databinding.ActivityMainBinding;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.view.Menu;</span><br><span class="line"><span class="keyword">import</span> android.view.MenuItem;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"MainActivity"</span>;</span><br><span class="line">    <span class="keyword">private</span> AppBarConfiguration appBarConfiguration;</span><br><span class="line">    <span class="keyword">private</span> ActivityMainBinding binding;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);<span class="comment">//加载main的布局</span></span><br><span class="line">        Button startNormalActivity=(Button) findViewById(R.id.start_noamal_activity);</span><br><span class="line">        <span class="comment">//创建按钮并且绑定</span></span><br><span class="line">        Button startDialogActivity=(Button)findViewById(R.id.start_dialog_activity);</span><br><span class="line">        startNormalActivity.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>{</span><br><span class="line">                Intent intent =<span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>,NormalLayoutActivity.class);</span><br><span class="line">                startActivity(intent);</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">        startDialogActivity.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>{</span><br><span class="line">                Intent intent = <span class="keyword">new</span> Intent(MainActivity.<span class="keyword">this</span>,DialogLayoutActivity.class);</span><br><span class="line">                startActivity(intent);</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onStart();</span><br><span class="line">        Log.d(TAG,<span class="string">"onStart"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onPause();</span><br><span class="line">        Log.d(TAG,<span class="string">"onPause"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onStop</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onStop();</span><br><span class="line">        Log.d(TAG,<span class="string">"onStop"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        Log.d(TAG,<span class="string">"onDestroy"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onRestart</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onRestart();</span><br><span class="line">        Log.d(TAG,<span class="string">"onRestart"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onResume();</span><br><span class="line">        Log.d(TAG,<span class="string">"onResume"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>创建之后是这个样子的</p>
<p><img src="/2022/09/06/Android-Learning/screen.png" alt=""></p>
<p>此时logcat显示，可以看到在MainActivity第一次被创建时会依次执行onCreate、onStart、onResume方法</p>
<p><img src="/2022/09/06/Android-Learning/1662686061919.png" alt=""></p>
<p>当我们点击NormalActivity，<strong>此时NoralActivity已经完全把MainActivity遮挡住了</strong>，onPause、onStop方法被执行</p>
<p><img src="/2022/09/06/Android-Learning/1662686248495.png" alt=""></p>
<p>接下来按下Back键，由于MainActivity已经创建过了，所以不会执行onCreate方法</p>
<p><img src="/2022/09/06/Android-Learning/1662686406193.png" alt=""></p>
<p>然后点击第二个按钮启动DialogActivity</p>
<p><img src="/2022/09/06/Android-Learning/screen1.png" alt=""></p>
<p><img src="/2022/09/06/Android-Learning/1662686524600.png" alt=""></p>
<p>可以看到这里只执行了onPause方法，<strong>这是因为DialogActivity并没有完全遮挡住MainActivity，MainActivity只进入暂停状态</strong>，此时按下Back只有onResume方法被执行</p>
<p><img src="/2022/09/06/Android-Learning/1662686647049.png" alt=""></p>
<p>最后在MainActivity中按下Back</p>
<p><img src="/2022/09/06/Android-Learning/1662686681739.png" alt=""></p>
<p>这三个方法依次执行，最终销毁MainActivity</p>
<h4 id="活动被回收了怎么处理"><a class="header-anchor" href="#活动被回收了怎么处理">¶</a>活动被回收了怎么处理</h4>
<blockquote>
<p><strong>当一个活动进入停止状态时，其可能被系统回收</strong>。虽然可以执行onCreate方法重新创建活动，但是原本活动的临时数据就会被回收了。<strong>而Activity中的onSaveInstanceState()回调方法可以保证在活动被回收之前一定会被调用，因此可以通过该方法来解决活动那个被回收时临时数据得不到保存的问题</strong></p>
<p><strong>onSaveInstanceState会携带一个Bundle类型的参数，Bundle提供了一系列的方法用于保存数据，比如putString()方法保存字符串，putInt()方法保存整型数据。每个保存方法都需要两个参数，第一个参数是键，用于后面从Bundle取值，第二个参数是真正的数据</strong></p>
<p><strong>取出数据的时候只需要使用onSaveInstanceState中对应的get方法取出即可</strong></p>
<p><strong>onCreate方法中有一个Bundle参数，当活动被系统回收之前有使用onSaveInstanceState方法保存数据的话，这个参数就会带有之前保存的所有数据</strong></p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662688387603.png" alt=""></p>
<p>取出</p>
<p><img src="/2022/09/06/Android-Learning/1662688504281.png" alt=""></p>
<p><strong>Intent和Bundle的结合</strong></p>
<p><img src="/2022/09/06/Android-Learning/1662688520457.png" alt="1662688520457"></p>
<h4 id="活动的启动模式"><a class="header-anchor" href="#活动的启动模式">¶</a>活动的启动模式</h4>
<blockquote>
<p><strong>在实际项目中我们应该根据特定的需要为每个互动指定恰当的启动模式，启动模式有standard、singleTop、singleTask和singleInstance，我们可以在AndroidManifest.xml中通过个<activity>指定android:launchMode属性来选择启动模式</activity></strong></p>
</blockquote>
<h5 id="standard"><a class="header-anchor" href="#standard">¶</a>standard</h5>
<p><strong>活动默认的启动方式</strong></p>
<blockquote>
<p><strong>对于standard模式的的活动，系统不会在乎这个活动是否已经在返回栈中存在，每次启动都会创建该活动的一个新实例</strong></p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662699467689.png" alt="多个相同活动的返回栈"></p>
<p>此时需要连续点击三次Back才能退出程序，每点击一次按钮就会创建一个新的实例</p>
<p><img src="/2022/09/06/Android-Learning/1662701465444.png" alt=""></p>
<p><img src="/2022/09/06/Android-Learning/1662701425060.png" alt=""></p>
<h5 id="singleTop"><a class="header-anchor" href="#singleTop">¶</a>singleTop</h5>
<p>当指定启动模式为singleTop时，当我们进入按钮时并不会再次重新创建实例，而是从栈顶取出相同的活动</p>
<p><img src="/2022/09/06/Android-Learning/1662701514289.png" alt=""></p>
<h5 id="singleTask"><a class="header-anchor" href="#singleTask">¶</a>singleTask</h5>
<blockquote>
<p><strong>使用singleTop模式可以很好地解决重复创建栈顶活动的问题，但是如果该活动没有处于栈顶位置，还是有可能会创建多个活动实例</strong>。</p>
<p><strong>而singleTask模式可以在启动活动时首先在栈中检查是否有该活动地实例，如果发现存在则直接使用该实例，并把在这个活动之上的所有活动统统出栈，如果没有则创建一个新的活动实例</strong></p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662723282294.png" alt=""></p>
<h5 id="singleInstance"><a class="header-anchor" href="#singleInstance">¶</a>singleInstance</h5>
<blockquote>
<p><strong>指定为singleInstance模式地活动会启用一个新的返回栈来管理这个活动</strong>。<strong>当我们想在本程序中和其他程序中共享一个活动的实例，但是每个应用程序都会有自己的返回栈，同一个活动在不同的返回栈入栈时必然是创建了新的实例。而在singleInstance模式下，会有一个单独的返回栈来管理这个活动，这就实现了共享活动实例</strong></p>
</blockquote>
<p>我们指定SencondActivity为singleInstance模式，MainActivity和ThirdActivity则是默认的启动模式，在每个活动中我们都让其打印当前任务的id(同一个任务使用同一个返回栈)，并且重写OnDestroy方法打印当前活动名称</p>
<p><img src="/2022/09/06/Android-Learning/1662778547326.png" alt=""></p>
<p>运行之后发现SencondActivity和MainActivity、ThirdActivity的任务id并不相同</p>
<p><img src="/2022/09/06/Android-Learning/1662778609979.png" alt=""></p>
<p>并且在ThirdActivity中点击Back键会直接返回到MainActivity中，再点击Back就返回到SecondActivity，<strong>这是因为MainActivity和ThirdActivity处于同一返回栈，只有当前返回栈为空，才会显示另一个返回栈的栈顶活动</strong></p>
<p><img src="/2022/09/06/Android-Learning/1662778853292.png" alt=""></p>
<p>原理示意图</p>
<p><img src="/2022/09/06/Android-Learning/1662730119493.png" alt=""></p>
<h4 id="随时随地退出程序"><a class="header-anchor" href="#随时随地退出程序">¶</a>随时随地退出程序</h4>
<blockquote>
<p>当我们创建多个活动而想要直接退出程序时，<strong>我们可以用一个专门的集合类来对所有的活动进行管理</strong></p>
<p><strong>只需要创建一个类，每当有一个活动被创建就加入到活动管理器中，销毁时移除，要是想在任何地方结束所有活动，直接调用ActivityCollector中的finishAll()方法即可</strong></p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662823868673.png" alt=""></p>
<h4 id="启动活动的最佳语法"><a class="header-anchor" href="#启动活动的最佳语法">¶</a>启动活动的最佳语法</h4>
<blockquote>
<p>前面介绍过两个活动之间使用Intent实现活动间数据的传递，其实<strong>更好的做法是创建一个方法来构建Intent对象，这样传入活动的参数就很明显了</strong></p>
</blockquote>
<p>在SecondActivity中写一个创建实例并传入数据的方法，最后启动活动，而MainActivity中直接调用SecondActivity活动中的这个方法即可，<strong>这样我们就能清楚看到SecondActivity活动所需要传入的参数</strong></p>
<p><img src="/2022/09/06/Android-Learning/1662824921483.png" alt=""></p>
<p><img src="/2022/09/06/Android-Learning/1662824903256.png" alt=""></p>
<h1 id="UI开发的点点滴滴"><a class="header-anchor" href="#UI开发的点点滴滴">¶</a>UI开发的点点滴滴</h1>
<p>在每个活动的布局中</p>
<p><img src="/2022/09/06/Android-Learning/1662858899626.png" alt=""></p>
<h2 id="常用控件的使用方法"><a class="header-anchor" href="#常用控件的使用方法">¶</a>常用控件的使用方法</h2>
<h3 id="TextView"><a class="header-anchor" href="#TextView">¶</a>TextView</h3>
<blockquote>
<p><strong>主要用于在界面上显示一段文本信息</strong></p>
</blockquote>
<p>创建一个TextView控件</p>
<p><img src="/2022/09/06/Android-Learning/1662857331805.png" alt=""></p>
<blockquote>
<p>控件的属性详解：android:id给当前控件定义了一个唯一标识符，<strong>android:layout_width和android:layout_height分别指定了控件的宽度的高度，所有的控件都有这两种属性，主要有match_parent、fill_parent、wrap_content三种可选值，match_parent和fill_parent一样，表示让当前控件的大小和父布局的一样，也就是由父布局来决定当前控件的大小，wrap_content则表示当前控件的大小刚好能包含里面的内容，也就是孔家内容决定当前控件的大小</strong></p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662857822592.png" alt="居左上角对齐"></p>
<p>TextView的文字默认是居左上角对齐的，想要修改对齐方式只需要使用<strong>android:gravity，可选值有top、bottom、left、right、center，可以使用|来同时指定多个值</strong></p>
<p><img src="/2022/09/06/Android-Learning/1662857927093.png" alt="居中对齐"></p>
<blockquote>
<p><strong>此外我们还可以通过android:textSize和android:textColor属性来指定文字的大小和颜色</strong></p>
</blockquote>
<h3 id="Button"><a class="header-anchor" href="#Button">¶</a>Button</h3>
<p>Button的两种监听方式，<strong>可以通过android:textAllcaps来关闭和开启Button按钮的大小写</strong></p>
<p><img src="/2022/09/06/Android-Learning/1662880045024.png" alt=""></p>
<p><img src="/2022/09/06/Android-Learning/1662880034972.png" alt=""></p>
<h3 id="EditText"><a class="header-anchor" href="#EditText">¶</a>EditText</h3>
<blockquote>
<p><strong>通过android:hint在未输入前提示，android:maxlines来指定最大行数，当输入的内容超过两行时，文本会自动向上滚</strong></p>
</blockquote>
<p><strong>我们也能在程序中获取输入然后进行处理</strong></p>
<p><img src="/2022/09/06/Android-Learning/1662880263558.png" alt=""></p>
<p><img src="/2022/09/06/Android-Learning/1662880225392.png" alt=""></p>
<h3 id="ImageView"><a class="header-anchor" href="#ImageView">¶</a>ImageView</h3>
<p><img src="/2022/09/06/Android-Learning/1662880295831.png" alt=""></p>
<h3 id="ProgressBar"><a class="header-anchor" href="#ProgressBar">¶</a>ProgressBar</h3>
<p><img src="/2022/09/06/Android-Learning/1662880319835.png" alt=""></p>
<h3 id="ProgressDialog"><a class="header-anchor" href="#ProgressDialog">¶</a>ProgressDialog</h3>
<p><img src="/2022/09/06/Android-Learning/1662880345039.png" alt=""></p>
<h2 id="四种布局方式"><a class="header-anchor" href="#四种布局方式">¶</a>四种布局方式</h2>
<h3 id="线性布局LinearLayout"><a class="header-anchor" href="#线性布局LinearLayout">¶</a>线性布局LinearLayout</h3>
<p>分为竖直方向和水平方向的线性排列</p>
<p><img src="/2022/09/06/Android-Learning/1662880400002.png" alt=""></p>
<p><strong>控件在布局中的对齐方式</strong></p>
<p><img src="/2022/09/06/Android-Learning/1662880450324.png" alt=""></p>
<p><strong>控件的权重占比</strong></p>
<p><img src="/2022/09/06/Android-Learning/1662880491695.png" alt=""></p>
<p><img src="/2022/09/06/Android-Learning/1662880503595.png" alt=""></p>
<p>如上设置EditText占了屏幕的四分之三</p>
<p><img src="/2022/09/06/Android-Learning/1662880530412.png" alt=""></p>
<h3 id="相对布局Relativelayout"><a class="header-anchor" href="#相对布局Relativelayout">¶</a>相对布局Relativelayout</h3>
<p>关于父布局的相对布局</p>
<p><img src="/2022/09/06/Android-Learning/1662880602902.png" alt=""></p>
<p><strong>关于控件的相对布局</strong></p>
<p><img src="/2022/09/06/Android-Learning/1662880633161.png" alt=""></p>
<h3 id="帧布局FrameLayout"><a class="header-anchor" href="#帧布局FrameLayout">¶</a>帧布局FrameLayout</h3>
<h3 id="百分比布局"><a class="header-anchor" href="#百分比布局">¶</a>百分比布局</h3>
<p>首先先在app/build.gradle导入</p>
<p><img src="/2022/09/06/Android-Learning/1662880698121.png" alt=""></p>
<p>百分比布局的使用</p>
<p><img src="/2022/09/06/Android-Learning/1662880722306.png" alt=""></p>
<h2 id="ListView"><a class="header-anchor" href="#ListView">¶</a>ListView</h2>
<blockquote>
<p>当我们需要展示大量数据给用户的时候就需要使用这个控件，比如查看QQ聊天记录、翻阅消息等，都需要让屏幕外的数据替代屏幕内的数据</p>
</blockquote>
<p>首先我们需要先把准备展示的数据提供好，<strong>数组中的数据无法直接传递给ListView，可以使用ArrayAdapter，可以通过泛型来指定要适配的数据类型，然后再Oncreate函数中将数据传入，传入适配数据之后，调用setAdapter犯法将构建好的适配器对象传递进去接口完成ListView与数据之间的关联</strong></p>
<h1 id="Android-NDK开发"><a class="header-anchor" href="#Android-NDK开发">¶</a>Android NDK开发</h1>
<p>首先先在AS中安装CMake和NDK</p>
<p><img src="/2022/09/06/Android-Learning/1662880920311.png" alt=""></p>
<h2 id="JNI和NDK"><a class="header-anchor" href="#JNI和NDK">¶</a>JNI和NDK</h2>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/268635786">JNI和NDK</a></p>
<p>JNI(Java Native Interface的缩写)，译为Java本地接口，是Java与C/C<ins>沟通的一门技术，JNI的目的就是在java中调用C、C</ins>写的本地方法，android下使用JNI需要的.so文件，是通过ndk-build生成的</p>
<p><img src="/2022/09/06/Android-Learning/1629797694_6124bd3e04f4b48e0205d.png!small" alt="三者的关系"></p>
<p><strong>Java之所以需要调用C、C++写的本地方法是因为</strong></p>
<p><img src="/2022/09/06/Android-Learning/1662881292721.png" alt=""></p>
<h3 id="JNI开发"><a class="header-anchor" href="#JNI开发">¶</a>JNI开发</h3>
<p>首先先创建好项目</p>
<p><img src="/2022/09/06/Android-Learning/1662883396973.png" alt=""></p>
<ol>
<li>编写Java类，声明native方法(声明之后使用ALT+ENTER快速创建)</li>
<li>编写native代码</li>
<li>将native代码编译成so文件</li>
<li>在java类中引入so库，调用native方法</li>
</ol>
<h4 id="native命名方法"><a class="header-anchor" href="#native命名方法">¶</a><strong>native命名方法</strong></h4>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="string">"C"</span> <span class="function">JNIEXPORT jstring JNICALL</span></span><br><span class="line"><span class="function"><span class="title">Java_com_example_myapplication_MainActivity_print</span><span class="params">(JNIEnv *env, jobject thiz)</span> </span>{</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement print()</span></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p><strong>函数命名规则：Java_类路径_方法名，JNIEnv时定义任何native方法的第一个参数，表示指向JNII环境的指针，可以通过他来访问JNI提供的接口方法，jobject表示Java对象中的this，如果是静态方法则表示jclass</strong>，JNIEXPORT和JNICALL时JNI定义的宏，可以在jni.h中找到</p>
</blockquote>
<h4 id="JNI数据类型和Java数据类型的关系"><a class="header-anchor" href="#JNI数据类型和Java数据类型的关系">¶</a>JNI数据类型和Java数据类型的关系</h4>
<p><strong>Native的基本数据类型其实就是将C/C++中的基本类型用typedef重新定义了一个新的名字，在JNI中可以直接访问</strong></p>
<figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">uint8_t</span>  jboolean; <span class="comment">/* unsigned 8 bits */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int8_t</span>   jbyte;    <span class="comment">/* signed 8 bits */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">uint16_t</span> jchar;    <span class="comment">/* unsigned 16 bits */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int16_t</span>  jshort;   <span class="comment">/* signed 16 bits */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int32_t</span>  jint;     <span class="comment">/* signed 32 bits */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int64_t</span>  jlong;    <span class="comment">/* signed 64 bits */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">float</span>    jfloat;   <span class="comment">/* 32-bit IEEE 754 */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span>   jdouble;  <span class="comment">/* 64-bit IEEE 754 */</span></span><br></pre></td></tr></tbody></table></figure>
<p><strong>引用数据类型，JNI使用C语言时，所有引用类型都是以jobject</strong></p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> _<span class="title">jobject</span> {</span>};</span><br><span class="line"><span class="class"><span class="keyword">class</span> _<span class="title">jclass</span> :</span> <span class="keyword">public</span> _jobject {};</span><br><span class="line"><span class="class"><span class="keyword">class</span> _<span class="title">jstring</span> :</span> <span class="keyword">public</span> _jobject {};</span><br><span class="line"><span class="class"><span class="keyword">class</span> _<span class="title">jarray</span> :</span> <span class="keyword">public</span> _jobject {};</span><br><span class="line"><span class="class"><span class="keyword">class</span> _<span class="title">jobjectArray</span> :</span> <span class="keyword">public</span> _jarray {};</span><br><span class="line"><span class="class"><span class="keyword">class</span> _<span class="title">jbooleanArray</span> :</span> <span class="keyword">public</span> _jarray {};</span><br><span class="line"><span class="class"><span class="keyword">class</span> _<span class="title">jbyteArray</span> :</span> <span class="keyword">public</span> _jarray {};</span><br><span class="line"><span class="class"><span class="keyword">class</span> _<span class="title">jcharArray</span> :</span> <span class="keyword">public</span> _jarray {};</span><br><span class="line"><span class="class"><span class="keyword">class</span> _<span class="title">jshortArray</span> :</span> <span class="keyword">public</span> _jarray {};</span><br><span class="line"><span class="class"><span class="keyword">class</span> _<span class="title">jintArray</span> :</span> <span class="keyword">public</span> _jarray {};</span><br><span class="line"><span class="class"><span class="keyword">class</span> _<span class="title">jlongArray</span> :</span> <span class="keyword">public</span> _jarray {};</span><br><span class="line"><span class="class"><span class="keyword">class</span> _<span class="title">jfloatArray</span> :</span> <span class="keyword">public</span> _jarray {};</span><br><span class="line"><span class="class"><span class="keyword">class</span> _<span class="title">jdoubleArray</span> :</span> <span class="keyword">public</span> _jarray {};</span><br><span class="line"><span class="class"><span class="keyword">class</span> _<span class="title">jthrowable</span> :</span> <span class="keyword">public</span> _jobject {};</span><br></pre></td></tr></tbody></table></figure>
<h3 id="JNI的字符串处理"><a class="header-anchor" href="#JNI的字符串处理">¶</a>JNI的字符串处理</h3>
<h4 id="native操作JVM"><a class="header-anchor" href="#native操作JVM">¶</a>native操作JVM</h4>
<blockquote>
<p><strong>JNI会把Java中所有对象当作一个C指针传递到本地方法中，这个指针指向JVM的内部数据结构，而内部的数据的结构在内存中的存储方式是不可见的。只能从JNIEnv指针指向的函数表选择合适的JNI函数来操作JVM中的数据结构</strong></p>
</blockquote>
<p>比如说native访问java.lang.String时，不能像访问基本数据类型那样使用，<strong>因为它是一个Java的引用类型，所以在本地方法中只能通过类似GetStringUTFChars这样的JNI函数来访问字符串的内容</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.myapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.nfc.Tag;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.util.Log;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.myapplication.databinding.ActivityMainBinding;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.Text;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"MainActivity"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Used to load the 'myapplication' library on application startup.</span></span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        System.loadLibrary(<span class="string">"myapplication"</span>);<span class="comment">//在java中引入so库</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>{</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        TextView tv=(TextView)findViewById(R.id.sample_text);</span><br><span class="line">        tv.setText(stringFromJNI());<span class="comment">//调用so方法</span></span><br><span class="line">        String result=print(<span class="string">"helloworld"</span>);</span><br><span class="line">        Log.d(TAG,result);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * A native method that is implemented by the 'myapplication' native library,</span></span><br><span class="line"><span class="comment">     * which is packaged with this application.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">native</span> String <span class="title">stringFromJNI</span><span class="params">()</span></span>;<span class="comment">//声明native方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">native</span> String <span class="title">print</span><span class="params">(String str)</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Java_com_example_myapplication_MainActivity_print</span>(JNIEnv *env, jobject thiz, jstring str) {</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement print()</span></span><br><span class="line">    <span class="comment">//从Java的内存中把字符串拷贝出来，在native中使用</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>*strFromJava=(<span class="keyword">char</span>*)env-&gt;<span class="built_in">GetStringUTFChars</span>(str,<span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">if</span>(strFromJava==<span class="literal">NULL</span>){<span class="comment">//如果从内存中拷贝的字符串为空，直接返回</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//字符串拷贝</span></span><br><span class="line">    <span class="keyword">char</span> buff[<span class="number">128</span>]={<span class="number">0</span>};</span><br><span class="line">    <span class="built_in">strcpy</span>(buff,strFromJava);</span><br><span class="line">    <span class="built_in">strcat</span>(buff,<span class="string">" My Friend!!"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//释放资源</span></span><br><span class="line">    env-&gt;<span class="built_in">ReleaseStringUTFChars</span>(str,strFromJava);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//返回数据，并且自动转为Unicode</span></span><br><span class="line">    <span class="keyword">return</span> env-&gt;<span class="built_in">NewStringUTF</span>(buff);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>在上面的代码中，print()函数接收一个jstring，而jstring是指向JVM内部的一个字符串，不能直接使用。<strong>首先需要将jstring转为C语言的字符串类型char*后才能使用，这里必须使用合适的JNI函数来访问JVM内部的字符串数据类型</strong></p>
<blockquote>
<p><strong>java中可以定义某个函数为native类型，对于native函数只需要声明即可，因为该函数的实现是native层的，即由相应的C去实现，java编译器遇到native函数时不会关心该函数的具体实现，因此编译上不会出现任何错误</strong></p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662886096895.png" alt=""></p>
<blockquote>
<p>Java中默认使用Unicode编码，C/C++默认使用UTF编码，所以在native层和java层进行字符串交流的时候需要进行编码转换，GetStringUTFChars可以把jstring指针的Unicode字符串转为UTF-8格式的C字符串</p>
</blockquote>
<blockquote>
<p><strong>ReleaseStringUTFChars方法释放内存空间</strong>，native需要我们手动释放申请的内存空间，GetStringUTFChars调用时会新<strong>申请一块空间用来装拷贝出来的字符串</strong>，<strong>这个字符串用来方便native代码访问和修改</strong></p>
</blockquote>
<blockquote>
<p><strong>最后NewStringUTF传入char*类型的字符串，构造出一个java.lang.String的字符串对象，并转为Unicode编码</strong></p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/1662886772261.png" alt=""></p>
<h3 id="数组操作"><a class="header-anchor" href="#数组操作">¶</a>数组操作</h3>
<h4 id="基本类型数组"><a class="header-anchor" href="#基本类型数组">¶</a>基本类型数组</h4>
<p><strong>基本类型数组就是JNI中的基本数据类型组成的数组，可以直接访问</strong></p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="string">"C"</span></span><br><span class="line"><span class="function">JNIEXPORT jint JNICALL</span></span><br><span class="line"><span class="function"><span class="title">Java_com_example_myapplication_MainActivity_SumArray</span><span class="params">(JNIEnv *env, jobject thiz, jintArray arr)</span> </span>{</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement SumArray()</span></span><br><span class="line">    <span class="keyword">int</span> result=<span class="number">0</span>;</span><br><span class="line">    <span class="comment">//获取数组长度</span></span><br><span class="line">    jint len=env-&gt;<span class="built_in">GetArrayLength</span>(arr);</span><br><span class="line">    <span class="comment">//动态申请数组</span></span><br><span class="line">    jint*c_array=(jint*)<span class="built_in">malloc</span>(len*<span class="built_in"><span class="keyword">sizeof</span></span>(jint));</span><br><span class="line">    <span class="comment">//初始化数据为0</span></span><br><span class="line">    <span class="built_in">memset</span>(c_array,<span class="number">0</span>,len);</span><br><span class="line">    <span class="comment">//将java中的数据赋值给C数组</span></span><br><span class="line">    env-&gt;<span class="built_in">GetIntArrayRegion</span>(arr,<span class="number">0</span>,len,c_array);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;++i){</span><br><span class="line">        result+=c_array[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//释放掉申请的内存</span></span><br><span class="line">    <span class="built_in">free</span>(c_array);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> arr[]={<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>};</span><br><span class="line">        <span class="keyword">int</span> final1=SumArray(arr);</span><br><span class="line">        Log.d(TAG,result);</span><br><span class="line">        Log.d(TAG,<span class="string">"sum is "</span>+final1);</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">int</span> <span class="title">SumArray</span><span class="params">(<span class="keyword">int</span> arr[])</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<p>得到结果</p>
<p><img src="/2022/09/06/Android-Learning/1662892351107.png" alt=""></p>
<blockquote>
<p><strong>C层能达到jint arr之后首先需要获取它的长度，然后动态申请一个数组(因为java层传递过来的数组长度是不定的，所以这里需要动态申请C层数组)。数组是jint型的，最后调用GetIntArrayRegion进行拷贝</strong></p>
</blockquote>
<h4 id="对象数组"><a class="header-anchor" href="#对象数组">¶</a>对象数组</h4>
<blockquote>
<p>所谓对象数组就是存储了多个对象的数组,<strong>对象数组中的元素是一个类的实例或其他数组的引用，不能直接访问Java传递给JNI层的数组</strong></p>
</blockquote>
<h3 id="Native调用Java方法"><a class="header-anchor" href="#Native调用Java方法">¶</a>Native调用Java方法</h3>
<h4 id="Native调用Java静态方法"><a class="header-anchor" href="#Native调用Java静态方法">¶</a>Native调用Java静态方法</h4>
<ol>
<li>首先调用FindClass函数传入Class描述符(<strong>Java类的全类名，在AS中输入MyJniclass会提示自动补全</strong>)，找到该类并得到jclass类型</li>
<li>然后通过GetStaticMethodID找到该方法的id，传入方法签名，得到jmethodID类型的引用。</li>
<li>构建入参，然后调用CallStaticObjectMethod去调用Java类里面的静态方法，然后传入参数，返回的直接就是Java层返回的数据。其实，这里的CallStaticObjectMethod是调用的引用类型的静态方法，<strong>与之相似的还有:CallStaticVoidMethod(无返参)，CallStaticIntMethod(返参是Int)，CallStaticFloatMethod</strong>等。</li>
<li>移除局部引用</li>
</ol>
<p>我们自己编写一个类</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyJniclass</span></span>{</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span>{</span><br><span class="line">            Log.d(TAG,<span class="string">"Native Call Method From Java"</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>
<p>接着我们编写native函数来调用这个类中的方法</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="string">"C"</span></span><br><span class="line"><span class="function">JNIEXPORT <span class="keyword">void</span> JNICALL</span></span><br><span class="line"><span class="function"><span class="title">Java_com_example_myapplication_MainActivity_CallMethodFromJava</span><span class="params">(JNIEnv *env, jobject thiz)</span> </span>{</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement CallMethodFromJava()</span></span><br><span class="line">    <span class="comment">//从class路径下搜索整个类，并返回整个类的class对象，com.example.myapplication.MainActivity活动中的MyJniclass类</span></span><br><span class="line">    jclass clazz=env-&gt;<span class="built_in">FindClass</span>(<span class="string">"com/example/myapplication/MainActivity$MyJniclass"</span>);</span><br><span class="line">    <span class="comment">//找到clazz类中要调用的方法，第三个参数是方法的参数和返回类型</span></span><br><span class="line">    jmethodID get=env-&gt;<span class="built_in">GetStaticMethodID</span>(clazz,<span class="string">"Print"</span>,<span class="string">"()V"</span>);<span class="comment">//最后一个方法签名需要指定正确的参数和返回值</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//如果是含参数和返回值的方法还需要传入参数和返回值</span></span><br><span class="line">    env-&gt;<span class="built_in">CallStaticVoidMethod</span>(clazz,get);</span><br><span class="line">    env-&gt;<span class="built_in">DeleteLocalRef</span>(clazz);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p><strong>这里要注意GetStaticMethodID的第三个参数，他既包含了参数类型也包含了返回值，这里的()V表示无参数且返回值为Void</strong></p>
</blockquote>
<p><strong>对于参数为String，返回值为String的方法是这样的</strong></p>
<p><img src="/2022/09/06/Android-Learning/1662898813132.png" alt=""></p>
<p><strong>参数为String和int，返回值为Void</strong></p>
<p><img src="/2022/09/06/Android-Learning/1662898895052.png" alt=""></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/13442116/getstaticmethodid-method-signature-for-public-static-myclass-mymethod">GetStaticMethodID第三个参数</a></p>
<h4 id="Native调用Java实例方法"><a class="header-anchor" href="#Native调用Java实例方法">¶</a>Native调用Java实例方法</h4>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wd_cloud/article/details/108755809#:~:text=%E5%8A%A8%E6%80%81%E6%B3%A8%E5%86%8C%E5%9F%BA%E6%9C%AC%E6%80%9D%E6%83%B3%E6%98%AF%E5%9C%A8JNI_Onload%20%28%29%E5%87%BD%E6%95%B0%E4%B8%AD%E9%80%9A%E8%BF%87JNI%E4%B8%AD%E6%8F%90%E4%BE%9B%E7%9A%84RegisterNatives%20%28%29%E6%96%B9%E6%B3%95%E6%9D%A5%E5%B0%86C%2FC%2B%2B%E6%96%B9%E6%B3%95%E5%92%8Cjava%E6%96%B9%E6%B3%95%E5%AF%B9%E5%BA%94%E8%B5%B7%E6%9D%A5%20%28%E6%B3%A8%E5%86%8C%29%2C%20%E6%88%91%E4%BB%AC%E5%9C%A8%E8%B0%83%E7%94%A8,System.loadLibrary%E7%9A%84%E6%97%B6%E5%80%99%2C%E4%BC%9A%E5%9C%A8C%2FC%2B%2B%E6%96%87%E4%BB%B6%E4%B8%AD%E5%9B%9E%E8%B0%83%E4%B8%80%E4%B8%AA%E5%90%8D%E4%B8%BA%20JNI_OnLoad%20%28%29%E7%9A%84%E5%87%BD%E6%95%B0%2C%E5%9C%A8%E8%BF%99%E4%B8%AA%E5%87%BD%E6%95%B0%E4%B8%AD%E4%B8%80%E8%88%AC%E6%98%AF%E5%81%9A%E4%B8%80%E4%BA%9B%E5%88%9D%E5%A7%8B%E5%8C%96%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C%2C%20%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E5%9C%A8%E8%BF%99%E4%B8%AA%E6%96%B9%E6%B3%95%E9%87%8C%E9%9D%A2%E6%B3%A8%E5%86%8C%E5%87%BD%E6%95%B0%2C%20%E6%B3%A8%E5%86%8C%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B%E5%A6%82%E4%B8%8B%3A">JNI动态注册</a></p>
<p>和上面的差不多</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyJNIClass</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> age = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getDes</span><span class="params">(String text)</span> </span>{</span><br><span class="line">        <span class="keyword">if</span> (text == <span class="keyword">null</span>) {</span><br><span class="line">            text = <span class="string">""</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"传入的字符串长度是 :"</span> + text.length() + <span class="string">"  内容是 : "</span> + text;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="string">"C"</span></span><br><span class="line"><span class="function">JNIEXPORT <span class="keyword">void</span> JNICALL</span></span><br><span class="line"><span class="function"><span class="title">Java_com_xzh_allinone_jni_CallMethodActivity_createAndCallJavaInstanceMethod</span><span class="params">(JNIEnv *env, jobject thiz)</span> </span>{</span><br><span class="line">	<span class="comment">//从jvm中加载类</span></span><br><span class="line">    jclass clazz = env-&gt;<span class="built_in">FindClass</span>(<span class="string">"com/xzh/allinone/jni/MyJNIClass"</span>);</span><br><span class="line">    <span class="comment">//获取构造方法的方法id</span></span><br><span class="line">    jmethodID mid_construct = env-&gt;<span class="built_in">GetMethodID</span>(clazz, <span class="string">"&lt;init&gt;"</span>, <span class="string">"()V"</span>);</span><br><span class="line">    <span class="comment">//通过实例获取getAge方法的方法id</span></span><br><span class="line">    jmethodID mid_get_age = env-&gt;<span class="built_in">GetMethodID</span>(clazz, <span class="string">"getAge"</span>, <span class="string">"()I"</span>);</span><br><span class="line">    jmethodID mid_set_age = env-&gt;<span class="built_in">GetMethodID</span>(clazz, <span class="string">"setAge"</span>, <span class="string">"(I)V"</span>);</span><br><span class="line">    jobject jobj = env-&gt;<span class="built_in">NewObject</span>(clazz, mid_construct);<span class="comment">//调用构造方法创建一个对象--实例，因为在java中，调用方法是通过p.Method()来进行的，所以需要先实例化对象</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//调用方法setAge</span></span><br><span class="line">    env-&gt;<span class="built_in">CallVoidMethod</span>(jobj, mid_set_age, <span class="number">20</span>);</span><br><span class="line">    <span class="comment">//再调用方法getAge 获取返回值 打印输出</span></span><br><span class="line">    jint age = env-&gt;<span class="built_in">CallIntMethod</span>(jobj, mid_get_age);</span><br><span class="line">    <span class="built_in">LOGI</span>(<span class="string">"获取到 age = %d"</span>, age);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//凡是使用是jobject的子类,都需要移除引用</span></span><br><span class="line">    env-&gt;<span class="built_in">DeleteLocalRef</span>(clazz);</span><br><span class="line">    env-&gt;<span class="built_in">DeleteLocalRef</span>(jobj);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h3 id="静态注册和动态注册"><a class="header-anchor" href="#静态注册和动态注册">¶</a>静态注册和动态注册</h3>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/1d6ec5068d05?u_atoken=f54b5f88-d697-4530-8473-dcfb43749102&amp;u_asession=01kasl2qDBJbleSslAl8nnNxucgnzSWTc0WVbCuu0fDVqPJSGNRfd7Wn1iFYQeckDJX0KNBwm7Lovlpxjd_P_q4JsKWYrT3W_NKPr8w6oU7K-p5bTmF9Nujo-Obbj53HtSPn5sJEo90JdruCukG2OVYmBkFo3NEHBv0PZUm6pbxQU&amp;u_asig=05DZ81BZt-FWBnKLVMjm1jMDzLcwQPv229vpEixdD0l6R6RtZBw5R0PKbMkcg0VL9S8qw_cJPMuspqwhO6wFVNmNFbT5q5aP6IbOSFZvaG9PTSBg7qy5i95N85W8z9rO_ilEOrf-Tnxu1_QxEhd49b5rziQFVHgLWHwnMsrK2XkDL9JS7q8ZD7Xtz2Ly-b0kmuyAKRFSVJkkdwVUnyHAIJzTkNwPsvCPOBm16fb8hI-vXiTdXVbtBrVRXhGmUUMb9wLoLNx2oKfcIBo1yjPF0Bne3h9VXwMyh6PgyDIVSG1W-wsuU0SnLFB58_42V-M_-cPuocUbzskgme5tE-44rhH_-oTfdCe-JcQv1dYrDr53W1vRGFAHeVTokTCWyoIBzImWspDxyAEEo4kbsryBKb9Q&amp;u_aref=cI4rIavOgNC5ecKshdMGLeSDjXI%3D">JNI函数注册</a></p>
<h4 id="静态注册"><a class="header-anchor" href="#静态注册">¶</a>静态注册</h4>
<p>首先在代码块中添加LoadLibrary函数加载动态链接库，<strong>这样后面的代码调用才能找到对应的原生函数(C++函数)</strong>。<strong>而静态代码块的执行时机早于构造函数、Oncreate方法，其在类加载的时候就被调用</strong></p>
<p><img src="/2022/09/06/Android-Learning/1663316049430.png" alt=""></p>
<blockquote>
<p><strong>静态注册原理是根据函数名将Java代码中的native方法与so中的JNI方法一一对应，当java层调用so层的函数时，如果发现其上有JNIEXPORT和JNICALL两个宏定义时，就会将so层函数(cpp中的函数)链接到对应的native方法中</strong>。下面是<strong>JNI函数名</strong>命名规则</p>
</blockquote>
<p><img src="/2022/09/06/Android-Learning/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20220916161929.jpg" alt=""></p>
<p>例如check函数需要命名为</p>
<p><img src="/2022/09/06/Android-Learning/1663316412656.png" alt=""></p>
<p><strong>静态注册的缺点</strong></p>
<ol>
<li>必须遵循某些规则</li>
<li>JNI方法名过长</li>
<li>运行时需要根据函数名查找对应的JNI函数，程序运行效率不高（因为当so层存在多个JNI函数时，则需要一一比较）</li>
</ol>
<h3 id="动态注册"><a class="header-anchor" href="#动态注册">¶</a>动态注册</h3>
<blockquote>
<p>**动态注册的原理是在调用System.LoadLibrary()时会在so层调用一个名为JNI_OnLoad()的函数，我们可以提供一个函数映射表，然后在JNI_OnLoad()函数中通过JNI中提供的 RegisterNatives()方法来注册函数, 这样Java就可以通过函数映射表来调用函数，而不必通过函数名（静态注册中复杂的函数名）来查找对应函数 **</p>
</blockquote>
<p><strong>动态注册的实现步骤</strong></p>
<ol>
<li>首先利用结构体JNINativeMethod数组记录native方法与JNI方法的对应关系，即函数映射表</li>
<li>实现JNI_OnLoad方法，在加载动态库之后，执行动态注册</li>
<li>调用FindClass方法，获取java对象</li>
<li>调用RegisterNatives方法，传入java对象，JNINativeMethod数组以及注册数目完成注册</li>
</ol>
<p>其中JNINativeMethod结构体如下所示：</p>
<figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> {</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>* name;         <span class="comment">// native方法名</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>* signature;    <span class="comment">// 方法签名，例如()Ljava/lang/String;</span></span><br><span class="line">    <span class="keyword">void</span>*       fnPtr;       <span class="comment">// 函数指针</span></span><br><span class="line">} JNINativeMethod;</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;jni.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">jstring <span class="title">stringFromJNI</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">        JNIEnv* env,</span></span></span><br><span class="line"><span class="params"><span class="function">        jobject <span class="comment">/* this */</span>)</span> </span>{</span><br><span class="line">    std::string hello = <span class="string">"Hello from C++"</span>;</span><br><span class="line">    <span class="keyword">return</span> env-&gt;<span class="built_in">NewStringUTF</span>(hello.<span class="built_in">c_str</span>());</span><br><span class="line">}</span><br><span class="line"><span class="comment">//函数映射表</span></span><br><span class="line">JNINativeMethod methods[]{</span><br><span class="line">        <span class="comment">//直接为结构体赋值</span></span><br><span class="line">        {<span class="string">"stringFromJNI"</span>,<span class="string">"()Ljava/lang/String;"</span>,(<span class="keyword">void</span>*) stringFromJNI}</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="function">jint <span class="title">JNI_OnLoad</span><span class="params">(JavaVM*vm,<span class="keyword">void</span>*reserverd)</span></span>{</span><br><span class="line">    JNIEnv*env=<span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">//首先获取jvm的环境，因为加载的类都在里面了，接下来获取类需要用到</span></span><br><span class="line">    <span class="keyword">if</span>(vm-&gt;<span class="built_in">GetEnv</span>((<span class="keyword">void</span>**)&amp;env,JNI_VERSION_1_6)!=JNI_OK){</span><br><span class="line">    <span class="keyword">return</span> JNI_ERR;<span class="comment">//告知版本</span></span><br><span class="line">}</span><br><span class="line">    <span class="comment">//获取java类，方便待会获取类中的成员方法</span></span><br><span class="line">    jclass clazz=env-&gt;<span class="built_in">FindClass</span>(<span class="string">"com/flag/regisiternative/MainActivity"</span>);</span><br><span class="line">    <span class="keyword">if</span>(clazz==<span class="literal">NULL</span>){</span><br><span class="line">        <span class="keyword">return</span> JNI_ERR;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//将java中的函数和so层的函数进行注册，进而直接调用native方法即可调用JNI函数</span></span><br><span class="line">    jint result=env-&gt;<span class="built_in">RegisterNatives</span>(clazz,methods,<span class="built_in"><span class="keyword">sizeof</span></span>(methods)/<span class="built_in"><span class="keyword">sizeof</span></span>(methods[<span class="number">0</span>]));</span><br><span class="line">    <span class="keyword">if</span>(result&lt;<span class="number">0</span>){</span><br><span class="line">        <span class="comment">//注册失败返回负值</span></span><br><span class="line">        <span class="keyword">return</span> JNI_ERR;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> JNI_VERSION_1_6;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p><strong>动态注册优点</strong></p>
<ul>
<li>通过函数映射表来查找对应的JNI方法，运行效率高</li>
<li>不需要遵循命名规则，灵活性更好</li>
</ul>
<p><strong>动态注册缺点</strong></p>
<ul>
<li>实现起来相对复杂</li>
<li>容易搞错方法签名导致注册失败</li>
</ul>
<h1 id="APK发布Release"><a class="header-anchor" href="#APK发布Release">¶</a>APK发布Release</h1>
<p><img src="/2022/09/06/Android-Learning/1662901583213.png" alt=""></p>
<p>创建一个key</p>
<p><img src="/2022/09/06/Android-Learning/1662901596834.png" alt=""></p>
<p>选择打包版本</p>
<p><img src="/2022/09/06/Android-Learning/1662901610064.png" alt=""></p>
<p><img src="/2022/09/06/Android-Learning/1662901718318.png" alt=""></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Android/" rel="tag"># Android</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/09/06/Learning/" rel="prev" title="Learning">
                  <i class="fa fa-chevron-left"></i> Learning
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/09/24/Frida-Practice/" rel="next" title="Frida_Practice">
                  Frida_Practice <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="valine-comments"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Gift1a</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">513k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">7:46</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdn.jsdelivr.net/npm/ribbon.js@1.0.2/dist/ribbon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






<script class="next-config" data-name="valine" type="application/json">{"enable":true,"appId":"GhjDb9gbtgwnrtsySW3fcGac-MdYXbMMI","appKey":"0Qw5kecTryGX5eSrEvShaWPw","serverURLs":"https://ghjdb9gb.api.lncldglobal.com","placeholder":"Just go go","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"lang":null,"visitor":"false# Article reading statistic","comment_count":true,"recordIP":true,"enableQQ":true,"requiredFields":[],"el":"#valine-comments","path":"/2022/09/06/Android-Learning/"}</script>
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.valine.el)
    .then(() => NexT.utils.getScript(
      'https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js',
      { condition: window.Valine }
    ))
    .then(() => {
      new Valine(CONFIG.valine);
    });
});
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false});</script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body>
</html>
